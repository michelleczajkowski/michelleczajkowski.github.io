<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: Part 2</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            font-size: 18px;
        }
        .highlightable {
            cursor: pointer;
        }
        .highlighted {
            background-color: rgb(207, 207, 152);
            font-weight: bold;
        }
        #text-container {
            background-color: lightgoldenrodyellow; /* Set a light grey background color */
            padding: 10px; /* Add some padding to create space around the text */
            border: 1px solid lightgoldenrodyellow; /* Add a 1px solid grey border */
        }
    </style>
</head>
<body>
    Part 2 <br>
    <p>In Task 1, you may have noticed a few other errors that the spelling and grammar checker didn't catch. Here's some extracts from the same text. Can you find the errors in spelling and grammar? Click on any words which are wrong (you don't need to correct them). There are no more than 10, but there may be fewer than 10.
    </p>
    
    
    <div id="text-container">
        <!-- Insert text here that's been generated by RTT html generating_Task 2.html-->

        …<br>
        <span class="highlightable" data-word-id="0">The</span> <span class="highlightable" data-word-id="1">study</span> <span class="highlightable" data-word-id="2">asked</span> <span class="highlightable" data-word-id="3">participants</span> <span class="highlightable" data-word-id="4">from</span> <span class="highlightable" data-word-id="5">fifteen</span> <span class="highlightable" data-word-id="6">neighbourhoods</span> <span class="highlightable" data-word-id="7">in</span> <span class="highlightable" data-word-id="8">three</span> <span class="highlightable" data-word-id="9">cities</span> <span class="highlightable" data-word-id="10">responded</span> <span class="highlightable" data-word-id="11">to</span> <span class="highlightable" data-word-id="12">an</span> <span class="highlightable" data-word-id="13">online</span> <span class="highlightable" data-word-id="14">questionnaire</span>. <span class="highlightable" data-word-id="15">In</span> <span class="highlightable" data-word-id="16">total</span>, <span class="highlightable" data-word-id="17">over</span> <span class="highlightable" data-word-id="18">500</span> <span class="highlightable" data-word-id="19">questionnaires</span> <span class="highlightable" data-word-id="20">were</span> <span class="highlightable" data-word-id="21">completed</span>. <span class="highlightable" data-word-id="22">The</span> <span class="highlightable" data-word-id="23">results</span> <span class="highlightable" data-word-id="24">of</span> <span class="highlightable" data-word-id="25">the</span> <span class="highlightable" data-word-id="26">study</span> <span class="highlightable" data-word-id="27">show</span> <span class="highlightable" data-word-id="28">that</span> <span class="highlightable" data-word-id="29">residents</span> <span class="highlightable" data-word-id="30">took</span> <span class="highlightable" data-word-id="31">more</span> <span class="highlightable" data-word-id="32">actions</span> <span class="highlightable" data-word-id="33">to</span> <span class="highlightable" data-word-id="34">insulate</span> <span class="highlightable" data-word-id="35">their</span> <span class="highlightable" data-word-id="36">homes</span> <span class="highlightable" data-word-id="37">than</span> <span class="highlightable" data-word-id="38">predicted</span>, <span class="highlightable" data-word-id="39">an</span> <span class="highlightable" data-word-id="40">expected</span> <span class="highlightable" data-word-id="41">effect</span> <span class="highlightable" data-word-id="42">of</span> <span class="highlightable" data-word-id="43">last</span> <span class="highlightable" data-word-id="44">years</span> <span class="highlightable" data-word-id="45">gas</span> <span class="highlightable" data-word-id="46">prices</span>. 
        <br>…<br>
        <span class="highlightable" data-word-id="47">Previous</span> <span class="highlightable" data-word-id="48">study's</span> <span class="highlightable" data-word-id="49">have</span> <span class="highlightable" data-word-id="50">shown</span> <span class="highlightable" data-word-id="51">that</span> <span class="highlightable" data-word-id="52">homeowners</span> <span class="highlightable" data-word-id="53">are</span> <span class="highlightable" data-word-id="54">both</span> <span class="highlightable" data-word-id="55">more</span> <span class="highlightable" data-word-id="56">likely</span> <span class="highlightable" data-word-id="57">to</span> <span class="highlightable" data-word-id="58">proactive</span> <span class="highlightable" data-word-id="59">insulate</span> <span class="highlightable" data-word-id="60">their</span> <span class="highlightable" data-word-id="61">homes</span> <span class="highlightable" data-word-id="62">then</span> <span class="highlightable" data-word-id="63">renters</span>, <span class="highlightable" data-word-id="64">who</span> <span class="highlightable" data-word-id="65">view</span> <span class="highlightable" data-word-id="66">home</span> <span class="highlightable" data-word-id="67">improvement</span> <span class="highlightable" data-word-id="68">as</span> <span class="highlightable" data-word-id="69">the</span> <span class="highlightable" data-word-id="70">owner's</span> <span class="highlightable" data-word-id="71">responsibility</span>, <span class="highlightable" data-word-id="72">and</span> <span class="highlightable" data-word-id="73">to</span> <span class="highlightable" data-word-id="74">feel</span> <span class="highlightable" data-word-id="75">a</span> <span class="highlightable" data-word-id="76">sense</span> <span class="highlightable" data-word-id="77">of</span> <span class="highlightable" data-word-id="78">belonging</span> <span class="highlightable" data-word-id="79">in</span> <span class="highlightable" data-word-id="80">their</span> <span class="highlightable" data-word-id="81">neighbourhood</span>. <span class="highlightable" data-word-id="82">The</span> <span class="highlightable" data-word-id="83">results</span> <span class="highlightable" data-word-id="84">of</span> <span class="highlightable" data-word-id="85">this</span> <span class="highlightable" data-word-id="86">study</span> <span class="highlightable" data-word-id="87">extend</span> <span class="highlightable" data-word-id="88">this</span> <span class="highlightable" data-word-id="89">idea</span>, <span class="highlightable" data-word-id="90">showing</span> <span class="highlightable" data-word-id="91">a</span> <span class="highlightable" data-word-id="92">relationship</span> <span class="highlightable" data-word-id="93">between</span> <span class="highlightable" data-word-id="94">this</span> <span class="highlightable" data-word-id="95">feeling</span> <span class="highlightable" data-word-id="96">and</span> <span class="highlightable" data-word-id="97">efforts</span> <span class="highlightable" data-word-id="98">to</span> <span class="highlightable" data-word-id="99">better</span> <span class="highlightable" data-word-id="100">weatherproof</span> <span class="highlightable" data-word-id="101">one</span>’<span class="highlightable" data-word-id="102">s</span> <span class="highlightable" data-word-id="103">home</span>. 
        <br><span class="highlightable" data-word-id="104">The</span> <span class="highlightable" data-word-id="105">researchers</span> <span class="highlightable" data-word-id="106">believe</span> <span class="highlightable" data-word-id="107">that</span> <span class="highlightable" data-word-id="108">such</span> <span class="highlightable" data-word-id="109">home</span> <span class="highlightable" data-word-id="110">improvement</span> <span class="highlightable" data-word-id="111">efforts</span> <span class="highlightable" data-word-id="112">provide</span> <span class="highlightable" data-word-id="113">a</span> <span class="highlightable" data-word-id="114">feeling</span> <span class="highlightable" data-word-id="115">of</span> <span class="highlightable" data-word-id="116">being</span> <span class="highlightable" data-word-id="117">in</span> <span class="highlightable" data-word-id="118">control</span> <span class="highlightable" data-word-id="119">over</span> <span class="highlightable" data-word-id="120">one's</span> <span class="highlightable" data-word-id="121">environment</span>, <span class="highlightable" data-word-id="122">weather</span> <span class="highlightable" data-word-id="123">financial</span>, <span class="highlightable" data-word-id="124">social</span> <span class="highlightable" data-word-id="125">or</span> <span class="highlightable" data-word-id="126">physical</span>. <span class="highlightable" data-word-id="127">This</span> <span class="highlightable" data-word-id="128">conclusion</span> <span class="highlightable" data-word-id="129">has</span> <span class="highlightable" data-word-id="130">implications</span> <span class="highlightable" data-word-id="131">for</span> <span class="highlightable" data-word-id="132">improving</span> <span class="highlightable" data-word-id="133">other</span> <span class="highlightable" data-word-id="134">aspects</span> <span class="highlightable" data-word-id="135">of</span> <span class="highlightable" data-word-id="136">a</span> <span class="highlightable" data-word-id="137">neighbourhood</span> <span class="highlightable" data-word-id="138">as</span> <span class="highlightable" data-word-id="139">well</span>. <span class="highlightable" data-word-id="140">Previous</span> <span class="highlightable" data-word-id="141">research</span> <span class="highlightable" data-word-id="142">shows</span>, <span class="highlightable" data-word-id="143">unsurprisingly</span>, <span class="highlightable" data-word-id="144">that</span> <span class="highlightable" data-word-id="145">people</span> <span class="highlightable" data-word-id="146">who</span> <span class="highlightable" data-word-id="147">feel</span> <span class="highlightable" data-word-id="148">they</span> <span class="highlightable" data-word-id="149">are</span> <span class="highlightable" data-word-id="150">part</span> <span class="highlightable" data-word-id="151">of</span> <span class="highlightable" data-word-id="152">a</span> <span class="highlightable" data-word-id="153">neighbourhood</span> <span class="highlightable" data-word-id="154">take</span> <span class="highlightable" data-word-id="155">the</span> <span class="highlightable" data-word-id="156">initiative</span> <span class="highlightable" data-word-id="157">to</span> <span class="highlightable" data-word-id="158">pick</span> <span class="highlightable" data-word-id="159">up</span> <span class="highlightable" data-word-id="160">litter</span>, <span class="highlightable" data-word-id="161">plant</span> <span class="highlightable" data-word-id="162">flowers</span>, <span class="highlightable" data-word-id="163">and</span> <span class="highlightable" data-word-id="164">push</span> <span class="highlightable" data-word-id="165">the</span> <span class="highlightable" data-word-id="166">local</span> <span class="highlightable" data-word-id="167">government</span> <span class="highlightable" data-word-id="168">to</span> <span class="highlightable" data-word-id="169">make</span> <span class="highlightable" data-word-id="170">repairs</span> <span class="highlightable" data-word-id="171">to</span> <span class="highlightable" data-word-id="172">the</span> <span class="highlightable" data-word-id="173">road</span> <span class="highlightable" data-word-id="174">and</span> <span class="highlightable" data-word-id="175">pavement</span>.
        <br>…<br>
        <br><span class="highlightable" data-word-id="176">If</span> <span class="highlightable" data-word-id="177">the</span> <span class="highlightable" data-word-id="178">government</span> <span class="highlightable" data-word-id="179">would reduce</span> <span class="highlightable" data-word-id="180">the</span> <span class="highlightable" data-word-id="181">cost</span> <span class="highlightable" data-word-id="182">of</span> <span class="highlightable" data-word-id="183">insulating</span> <span class="highlightable" data-word-id="184">measures</span>, <span class="highlightable" data-word-id="185">it</span> <span class="highlightable" data-word-id="186">could</span> <span class="highlightable" data-word-id="187">benefit</span> <span class="highlightable" data-word-id="188">people</span> <span class="highlightable" data-word-id="189">of</span> <span class="highlightable" data-word-id="190">a</span> <span class="highlightable" data-word-id="191">number</span> <span class="highlightable" data-word-id="192">of</span> <span class="highlightable" data-word-id="193">different</span> <span class="highlightable" data-word-id="194">ways</span>.

    <br><button id="save-button">Click when done</button>
    <div id="answer-container" style="display: none;">
        <p id="correct-answer"></p>
        <button id="next-button">Next</button>
    </div>
    <script defer>
        document.addEventListener("DOMContentLoaded", function () {
            const incorrectWords = ["responded", "years", "study's", "proactive", "then", "weather", "would reduce"];
            const highlightableWords = document.querySelectorAll(".highlightable");
            const saveButton = document.getElementById("save-button");
            const answerContainer = document.getElementById("answer-container");
            const correctAnswer = document.getElementById("correct-answer");
            const nextButton = document.getElementById("next-button");
            let selectedWordIndices = []; // Store word indices instead of words
            let selectedWordsText;

            // Function to toggle word highlighting and store its index
            function toggleHighlight(word) {
                word.classList.toggle("highlighted");
                const wordId = word.dataset.wordId;
                if (word.classList.contains("highlighted")) {
                    selectedWordIndices.push(wordId);
                } else {
                    selectedWordIndices = selectedWordIndices.filter(selectedId => selectedId !== wordId);
                }
            }

            // Add click event listeners to each highlightable word
            highlightableWords.forEach((word, index) => {
                word.addEventListener("click", () => {
                    toggleHighlight(word, index);
                });
            });

            // Add click event listener to save button
            saveButton.addEventListener("click", () => {
                // Store the unique identifiers instead of indices
                const selectedWords = selectedWordIndices.map(index => highlightableWords[index].dataset.wordId);

                // Display the selected words
                const selectedWordsText = selectedWords.join('-');
                //correctAnswer.innerHTML = `Selected Words: ${selectedWordsText}`;

                // Show the answer container
                answerContainer.style.display = "block";
                
            });


            // Add click event listener to next button
            nextButton.addEventListener("click", () => {

                // Store the unique identifiers instead of indices
                const selectedWords = selectedWordIndices.map(index => highlightableWords[index].dataset.wordId);

                // Display the selected words
                const selectedWordsText = selectedWords.join('-');
                correctAnswer.innerHTML = `Selected Words: ${selectedWordsText}`;
                // Calculate the updated coda value by adding truePositives and falsePositives
                const updatedCoda = `${codaQueryParam},${selectedWordsText}`;

                // Redirect the user to the new URL with the updated coda parameter
                window.location.href = `spell_check_task_3.html?coda=${updatedCoda}`;
            });

        });
    // Function to parse query parameters from the URL
    function getQueryParam(parameterName) {
        const urlSearchParams = new URLSearchParams(window.location.search);
        return urlSearchParams.get(parameterName);
    }

    // Retrieve the coda value from the URL
    const codaQueryParam = getQueryParam("coda");

    // You can now use the codaQueryParam as needed on this page
    console.log(`Received coda from previous page: ${codaQueryParam}`);

    </script>
</body>
</html>
